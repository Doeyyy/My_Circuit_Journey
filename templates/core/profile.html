{% extends 'Circuit_Journey/base.html' %}
{% block title %}Profile - DjangoBlog{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">

  <!-- Left: User Info (HTMX swap target) -->
  <aside id="profile-info">
    {% include 'core/partials/profile_info.html' %}
  </aside>

  <!-- Right: User's Articles -->
  <div class="lg:col-span-2 space-y-6">
    <h3 class="text-xl font-bold text-[#E6F1FF] border-b border-[#64FFDA]/30 pb-2">
      My Articles ({{ blogs.count }})
    </h3>

    {% for blog in blogs %}
    <div class="bg-[#112240] rounded-lg overflow-hidden shadow-lg hover:scale-[1.01] transition">
      <div class="grid grid-cols-1 md:grid-cols-3">
        {% if blog.thumbnail %}
        <img src="{{ blog.thumbnail.url }}" alt="{{ blog.title }}" class="w-full h-48 object-cover md:col-span-1">
        {% endif %}
        <div class="p-4 md:col-span-2">
          <span class="bg-[#64FFDA] text-[#0A192F] px-2 py-1 rounded-full text-xs font-semibold">{{ blog.category.title }}</span>
          <h4 class="text-lg font-bold mt-2 text-[#E6F1FF]">{{ blog.title }}</h4>
          <p class="text-[#8892B0] mt-1">{{ blog.body|truncatewords:20 }}</p>
          <div class="mt-3 flex justify-between items-center">
            <small class="text-[#8892B0]">Posted on {{ blog.created_at|date:"F j, Y" }}</small>
            <div class="flex gap-2">
              <a href="{% url 'update-article' blog.slug %}" class="border border-[#64FFDA] text-[#64FFDA] px-3 py-1 rounded-md hover:bg-[#64FFDA] hover:text-[#0A192F] text-xs">Edit</a>
              <a href="{% url 'delete-article' blog.slug %}" class="border border-red-500 text-red-500 px-3 py-1 rounded-md hover:bg-red-500 hover:text-white text-xs">Delete</a>
              <a href="{% url 'detail' blog.slug %}" class="bg-[#64FFDA] text-[#0A192F] px-3 py-1 rounded-md text-xs font-semibold hover:opacity-80">View</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="bg-[#112240] rounded-lg p-6 text-center text-[#8892B0]">
      You havenâ€™t posted any articles yet.
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
